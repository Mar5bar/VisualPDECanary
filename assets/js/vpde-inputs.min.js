class e extends HTMLElement{constructor(){for(super();this.firstChild;)this.removeChild(this.firstChild);this.frameIDs=this.getAttribute("iframe").split(" "),this.message={},this.host=this.getAttribute("host")||"/"}sendUpdate(){this.frameIDs.forEach((e=>{document.getElementById(e)?.contentWindow.postMessage(this.message,this.host)}))}}class t extends e{constructor(){super();const e=document.createElement("span");e.style.setProperty("white-space","nowrap"),e.classList.add("vpde-button"),this.span=e,this.append(e),this.addEventListener("click",this.onclick.bind(this))}onclick(){this.sendUpdate()}}customElements.define("vpde-slider",class extends e{constructor(){super(),this.message.name=this.getAttribute("name"),this.message.type="updateParam";const e="id"+Math.random().toString(16).slice(2),t=document.createElement("span");t.style.setProperty("white-space","nowrap");const s="true"==this.getAttribute("reversed")?this.getAttribute("max-label"):this.getAttribute("min-label"),a="true"==this.getAttribute("reversed")?this.getAttribute("min-label"):this.getAttribute("max-label");if(s){let e=t.appendChild(document.createElement("span"));e.innerHTML=s,e.classList.add("vpde-slider-valLabel")}const i=t.appendChild(document.createElement("span"));if(i.style.setProperty("position","relative"),this.getAttribute("label")){const s=i.appendChild(document.createElement("label"));s.innerHTML=this.getAttribute("label"),s.setAttribute("for",e),s.classList.add("vpde-slider-label"),"above"==this.getAttribute("label-position")?(s.classList.add("above"),t.style.setProperty("margin-top","1em")):t.style.setProperty("margin-bottom","1em")}const l=i.appendChild(document.createElement("input"));l.type="range",l.setAttribute("id",e);const r=this.getAttribute("value")||.5;if(l.min=this.getAttribute("min")||r-.5,l.max=this.getAttribute("max")||r+.5,l.step=this.getAttribute("step")||(l.max-l.min)/20,l.value=r,l.addEventListener("input",this.onInput.bind(this)),this.message.value=l.value,a){let e=t.appendChild(document.createElement("span"));e.innerHTML=a,e.classList.add("vpde-slider-valLabel")}l.classList.add("vpde-slider"),l.classList.add("slider-progress"),l.style.setProperty("--value",l.value),l.style.setProperty("--min",l.min),l.style.setProperty("--max",l.max),l.style.setProperty("--reversed",0),"true"==this.getAttribute("reversed")&&(l.classList.add("reversed"),l.style.setProperty("--reversed",1)),this.slider=l,this.append(t),null!=MathJax.typesetPromise&&MathJax.typesetPromise(),this.frameIDs.forEach((e=>{document.getElementById(e)?.addEventListener("load",this.sendUpdate.bind(this))}))}onInput(){this.slider.style.setProperty("--value",this.slider.value),this.message.value=this.slider.value,this.sendUpdate()}setValue(e){this.slider.value=e,this.onInput()}}),customElements.define("vpde-select",class extends e{constructor(){super(),this.message.displayNames=this.getAttribute("display-names").split(";"),this.message.paramStrs=this.getAttribute("parameters").split(";"),this.message.type="updateParam";const e=document.createElement("select");e.classList.add("vpde-select");for(let t=0;t<this.message.displayNames.length;t++){const s=document.createElement("option");s.value=this.message.paramStrs[t],s.innerHTML=this.message.displayNames[t],e.appendChild(s)}e.addEventListener("change",(()=>{const t=e.value.split(","),s=[],a=[];for(let e=0;e<t.length;e++){const i=t[e].split("=");2==i.length?(s.push(i[0].trim()),a.push(i[1].trim())):console.error("Invalid parameter string format. Expected 'name=value'.")}this.message.name=s,this.message.value=a,this.sendUpdate()}));const t="id"+Math.random().toString(16).slice(2);e.setAttribute("id",t),this.append(e),this.select=e,null!=MathJax.typesetPromise&&MathJax.typesetPromise(),this.frameIDs.forEach((e=>{document.getElementById(e)?.addEventListener("load",this.sendUpdate.bind(this))}))}}),customElements.define("vpde-reset",class extends t{constructor(){super(),this.message.type="resetSim",this.symbol=this.span.appendChild(document.createElement("i")),this.symbol.classList.add("fa-solid","fa-arrow-rotate-left")}}),customElements.define("vpde-playpause",class extends t{constructor(){super(),this.state=this.getAttribute("action")||"play",this.message.type="play"==this.state?"playSim":"pauseSim",this.playWrapper=this.span.appendChild(document.createElement("div")),this.playWrapper.appendChild(document.createElement("i")).classList.add("fa-solid","fa-play"),this.span.append(this.playWrapper),this.pauseWrapper=this.span.appendChild(document.createElement("div")),this.pauseWrapper.appendChild(document.createElement("i")).classList.add("fa-solid","fa-pause"),this.span.append(this.pauseWrapper),this.setDisplay()}onclick(){super.onclick(),"play"==this.state?(this.state="pause",this.message.type="pauseSim"):(this.state="play",this.message.type="playSim"),this.setDisplay()}setDisplay(){"play"==this.state?(this.pauseWrapper.style.display="none",this.playWrapper.style.display="inline-flex"):(this.playWrapper.style.display="none",this.pauseWrapper.style.display="inline-flex")}});