!function(){Chart.defaults.font.family='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,\n    Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",\n    "Segoe UI Symbol"',Chart.defaults.font.size="11",Chart.defaults.color=getComputedStyle(document.documentElement).getPropertyValue("--text-color")||"black",document.documentElement.classList.contains("dark-mode")&&(Chart.defaults.borderColor=getComputedStyle(document.documentElement).getPropertyValue("--ui-button-border-color")||"white");class t extends HTMLElement{constructor(){for(super();this.firstChild;)this.removeChild(this.firstChild)}connectedCallback(){this.message={type:"id"},this.host=this.getAttribute("host")||"https://visualpde.com",window.addEventListener("DOMContentLoaded",(()=>{this.frameIDs&&this.sendIDs()}));const t=document.createElement("div");t.classList.add("vpde-chart-container"),t.setAttribute("style",this.getAttribute("style")||"position:relative"),this.appendChild(t);const e=document.createElement("canvas");t.appendChild(e);const i=new Chart(e,{type:"line",options:{borderWidth:parseFloat(this.getAttribute("borderWidth"))||2.5,borderColor:getComputedStyle(document.documentElement).getPropertyValue("--link-color")||"blue",layout:{padding:{top:17,right:17}},responsive:!0,animation:!1,maintainAspectRatio:!1,parsing:!1,scales:{x:{type:"linear",ticks:{maxTicksLimit:2,callback:function(t,e,i){return""}}},y:{type:"linear",grace:"5%",ticks:{maxTicksLimit:10,callback:function(t,e,i){return function(t,e){const i=(t=parseFloat(t)).toFixed(e),s=t.toPrecision(e);return i.length<s.length?i:s}(t,3)}}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},decimation:{enabled:!0,algorithm:"lttb",threshold:200}}},data:{datasets:[{data:[],pointStyle:!1}]}});i.limMax=this.getAttribute("ymax")||-1/0,i.limMin=this.getAttribute("ymin")||1/0,i.dataStore=[],this.getAttribute("yticks")&&"false"==this.getAttribute("yticks")&&(i.options.scales.y.ticks.display=!1),window.addEventListener("message",(t=>{const e=t.data;if("probeData"!==e.type||!this.frameIDs||this.frameIDs.includes(e.id)){i.dataStore=e.data;let t=i.options.scales;t.x.max=i.dataStore.slice(-1)[0].x,t.x.min=i.dataStore[0].x;const s=i.dataStore.slice(-1)[0].y;i.limMin=Math.min(i.limMin,s),i.limMax=Math.max(i.limMax,s),isNaN(s)&&(i.limMax=-1/0,i.limMin=1/0),t.y.suggestedMin=i.limMin,t.y.suggestedMax=i.limMax,i.data.datasets[0].data=i.dataStore,i.update()}}));const s=this.getAttribute("xlabel")||"Time",a=document.createElement("div");a.innerHTML=s,a.setAttribute("style","position: absolute;bottom: 4px;left: 50%;transform: translateX(-50%);font-size: 0.8rem;"),t.appendChild(a);const o=this.getAttribute("ylabel")||"",n=document.createElement("div");n.innerHTML=o,n.setAttribute("style","position: absolute;left: -18px;top: 50%;transform: translateY(-50%) rotate(180deg);font-size: 0.8rem;writing-mode: vertical-rl;"),t.appendChild(n)}sendIDs(){this.frameIDs.forEach((t=>{this.message.id=t,document.getElementById(t)?.contentWindow.postMessage(this.message,this.host)}))}}customElements.define("vpde-chart",t)}();